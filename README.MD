# ğŸª™ Pix Token Orchestrator

Um sistema backend financeiro robusto desenvolvido em Python, focado em alta performance, seguranÃ§a e auditabilidade. O projeto orquestra recebimentos via Pix e converte valores fiduciÃ¡rios (BRL) em tokens digitais (Lastro 1:1), utilizando uma **Blockchain Interna (Ledger CriptogrÃ¡fico)** para garantir a imutabilidade das transaÃ§Ãµes.

## ğŸš€ Tecnologias e Arquitetura

Este projeto segue rigorosamente os princÃ­pios de **Clean Architecture** para garantir desacoplamento e testabilidade.

-   **Linguagem:** Python 3.11+
-   **Framework Web:** FastAPI (Async)
-   **Banco de Dados:** SQLite (via `aiosqlite` para suporte assÃ­ncrono) / SQLAlchemy 2.0
-   **SeguranÃ§a:** SHA-256 Hash Chaining (Blockchain Privada)
-   **Design Patterns:** Repository Pattern, Use Cases, Factory, Dependency Injection.

## ğŸ›ï¸ Estrutura do Projeto (Clean Architecture)

O cÃ³digo foi organizado para separar regras de negÃ³cio de detalhes de infraestrutura:

```text
src/
â”œâ”€â”€ domain/           # Regras de NegÃ³cio Puras (Entidades & Enums)
â”‚   â””â”€â”€ entities.py   # DefiniÃ§Ã£o de Wallet, Transaction e regras de validaÃ§Ã£o
â”œâ”€â”€ app/              # Casos de Uso (AÃ§Ãµes do Sistema)
â”‚   â”œâ”€â”€ use_cases/    # LÃ³gica de aplicaÃ§Ã£o (ex: Processar DepÃ³sito)
â”‚   â””â”€â”€ services/     # ServiÃ§os de domÃ­nio (ex: CryptoLedgerService)
â”œâ”€â”€ infra/            # Camada externa (Banco, APIs, Frameworks)
â”‚   â”œâ”€â”€ db/           # ConfiguraÃ§Ã£o do Banco de Dados e Models ORM
â”‚   â””â”€â”€ repositories/ # ImplementaÃ§Ã£o do acesso a dados (SQLAlchemy)
â””â”€â”€ main.py           # Entrypoint da API e ConfiguraÃ§Ã£o de Rotas
```

ğŸ”’ Destaque: Ledger CriptogrÃ¡fico (Blockchain Interna)
Diferente de sistemas comuns que apenas salvam o saldo, este projeto implementa um Ledger AuditÃ¡vel. Cada transaÃ§Ã£o salva no banco contÃ©m um hash criptogrÃ¡fico que depende da transaÃ§Ã£o anterior.

Como funciona:

GÃªnesis: A primeira transaÃ§Ã£o recebe hash anterior zerado.

Encadeamento: Hash Atual = SHA256(Dados da TransaÃ§Ã£o + Hash da TransaÃ§Ã£o Anterior).

Auditoria: O sistema possui um endpoint /audit/{wallet_id} que recalcula toda a corrente em tempo real. Se um dado for alterado manualmente no banco, a matemÃ¡tica nÃ£o bate e a API alerta FRAUDE.

âš™ï¸ Como Rodar Localmente
PrÃ©-requisitos
Python 3.11 ou superior

Git

InstalaÃ§Ã£o
Clone o repositÃ³rio:

Bash

git clone [https://github.com/SEU-USUARIO/pix-token-orchestrator.git](https://github.com/SEU-USUARIO/pix-token-orchestrator.git)
cd pix-token-orchestrator
Crie e ative o ambiente virtual:

Bash

# Windows
python -m venv venv
.\venv\Scripts\activate

# Linux/Mac
python3 -m venv venv
source venv/bin/activate
Instale as dependÃªncias:

Bash

pip install fastapi uvicorn sqlalchemy pydantic alembic python-dotenv aiosqlite
Rode a aplicaÃ§Ã£o:

Bash

python -m uvicorn src.main:app --reload
Acesse a documentaÃ§Ã£o interativa (Swagger):

Abra seu navegador em: http://127.0.0.1:8000/docs

ğŸ§ª Testando a API
Criar Carteira: Use POST /wallets/ para criar um usuÃ¡rio. Copie o user_id e o wallet_id.

Simular Pix: Use POST /webhook/pix-simulation com o user_id para depositar valores.

Auditar: Use GET /audit/{wallet_id} para verificar a integridade da blockchain daquela carteira.

ğŸ¤ ColaboraÃ§Ã£o e Desenvolvimento
Este projeto foi desenvolvido utilizando a metodologia de AI-Pair Programming. A arquitetura, regras de negÃ³cio e refatoraÃ§Ã£o de cÃ³digo foram construÃ­das em colaboraÃ§Ã£o entre:

[Seu Nome]: Engenharia de Software, DecisÃµes de Arquitetura e ImplementaÃ§Ã£o.

Gemini (Google AI): Consultoria TÃ©cnica, Code Review e SugestÃµes de Clean Code.

Projeto desenvolvido para fins de estudo em Engenharia de Software Backend SÃªnior.
